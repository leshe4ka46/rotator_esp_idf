{"ast":null,"code":"import { bus } from '@/event-bus';\nexport default {\n  name: 'RotatorReset_data',\n  data() {\n    return {\n      dialog: false\n    };\n  },\n  methods: {\n    reset() {\n      this.$ajax.post('/api/v1/users/whoami', {\n        key: Buffer.from(localStorage.getItem('rotator_client_id').toString(), 'utf-8').toString()\n      }).then(data => {\n        // eslint-disable-next-line\n        console.log(data);\n        if (data.data.role === 'admin') {\n          this.is_admin = 1;\n          bus.$emit('close_dialogs');\n        }\n      }).catch(error => {\n        // eslint-disable-next-line\n        console.log(error);\n      });\n      this.$ajax.get(`api/reset?key=${localStorage.getItem('rotator_client_id')}`).then(() => {\n        window.location.reload();\n      });\n      this.dialog = false;\n      bus.$emit('is_admin', 0);\n      bus.$emit('close_dialogs', 0);\n    }\n  }\n};","map":{"version":3,"mappings":"AAgCA;AACA;EACAA;EACAC;IACA;MACAC;IACA;EACA;EAEAC;IACAC;MACA,WACAC;QACAC;MACA,GACAC;QACA;QACAC;QACA;UACA;UACAC;QAEA;MACA,GACAC;QAAA;QACAF;MACA;MACA;QAAAG;MAAA;MACA;MACAF;MACAA;IACA;EAEA;AACA","names":["name","data","dialog","methods","reset","post","key","then","console","bus","catch","window"],"sourceRoot":"src/components","sources":["RotatorReset_data.vue"],"sourcesContent":["<template>\n  <div>\n    <v-btn depressed color=\"error\" @click=\"dialog=true\">\n      Delete all data\n    </v-btn>\n    <v-dialog v-model=\"dialog\" max-width=\"300\">\n      <v-card>\n        <v-card-title class=\"text-h5\">\n          Deleting data\n        </v-card-title>\n\n        <v-card-text>\n          Are you sure you want to <b>delete all</b> data? This action cannot be undone.\n        </v-card-text>\n\n        <v-card-actions>\n          <v-spacer></v-spacer>\n\n          <v-btn large x-large color=\"success\" text @click=\"dialog = false\">\n            Cancel\n          </v-btn>\n\n          <v-btn large x-large text color=\"error\" @click=\"reset\">\n            Delete ALL\n          </v-btn>\n        </v-card-actions>\n      </v-card>\n    </v-dialog>\n  </div>\n</template>\n\n<script>\nimport { bus } from '@/event-bus'\nexport default {\n  name: 'RotatorReset_data',\n  data () {\n    return {\n      dialog: false\n    }\n  },\n\n  methods: {\n    reset () {\n      this.$ajax\n          .post('/api/v1/users/whoami', {\n            key: Buffer.from(localStorage.getItem('rotator_client_id').toString(),'utf-8').toString()\n          })\n          .then(data => {\n            // eslint-disable-next-line\n            console.log(data);\n            if (data.data.role === 'admin') {\n              this.is_admin = 1;\n              bus.$emit('close_dialogs')\n\n            }\n          })\n          .catch(error => { // eslint-disable-next-line\n            console.log(error);\n          })\n      this.$ajax.get(`api/reset?key=${localStorage.getItem('rotator_client_id')}`).then(() => { window.location.reload() })\n      this.dialog = false\n      bus.$emit('is_admin', 0)\n      bus.$emit('close_dialogs', 0)\n    }\n\n  }\n}\n</script>\n"]},"metadata":{},"sourceType":"module"}