{"ast":null,"code":"// import axios from 'axios';\nimport { bus } from '@/event-bus';\nexport default {\n  name: 'RotatorMain',\n  data() {\n    return {\n      azimut: 0,\n      elevation: 0,\n      battery: 0,\n      ws: null\n    };\n  },\n  created() {\n    this.ws = new WebSocket(`ws://${window.location.hostname}/ws`); // `ws://localhost:2000/`\n    this.ws.onopen = function () {\n      // eslint-disable-next-line\n      console.log('WS подключен');\n    };\n    this.ws.onclose = function (eventclose) {\n      // eslint-disable-next-line\n      console.log('Cоеденение закрыто: ');\n      // eslint-disable-next-line\n      console.log(eventclose);\n    };\n    this.ws.onmessage = function (msg) {\n      var response = JSON.parse(msg.data);\n      this.battery = response.voltage.toFixed(2);\n      this.azimut = response.azimut.toFixed(2);\n      this.elevation = response.elevation.toFixed(2);\n    }.bind(this);\n    bus.$on('send_ws', mess => {\n      this.ws.send(mess);\n    });\n    setInterval(() => {\n      this.$ajax.get(`/api/v1/data/get/angles`).then(response => {\n        this.battery = response.data.voltage / 100;\n        this.azimut = response.data.azimut / 100;\n        this.elevation = response.data.elevation / 100;\n      });\n    }, 100);\n  },\n  methods: {}\n};","map":null,"metadata":{},"sourceType":"module"}