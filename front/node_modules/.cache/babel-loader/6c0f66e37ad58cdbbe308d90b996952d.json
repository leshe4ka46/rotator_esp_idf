{"ast":null,"code":"// import axios from 'axios';\nimport { bus } from '@/event-bus';\nexport default {\n  name: 'RotatorMain',\n  data() {\n    return {\n      azimut: 0,\n      elevation: 0,\n      battery: 0,\n      ws: null\n    };\n  },\n  created() {\n    this.ws = new WebSocket(`ws://${window.location.hostname}/ws`); // `ws://localhost:2000/`\n    this.ws.onopen = function () {\n      // eslint-disable-next-line\n      console.log('WS подключен');\n    };\n    this.ws.onclose = function (eventclose) {\n      // eslint-disable-next-line\n      console.log('Cоеденение закрыто: ');\n      // eslint-disable-next-line\n      console.log(eventclose);\n    };\n    this.ws.onmessage = function (msg) {\n      var response = JSON.parse(msg.data);\n      this.battery = response.voltage.toFixed(2);\n      this.azimut = response.azimut.toFixed(2);\n      this.elevation = response.elevation.toFixed(2);\n    }.bind(this);\n    bus.$on('send_ws', mess => {\n      this.ws.send(mess);\n    });\n    // setInterval(() => { axios.get(`api/get_data`).then((response) => { this.battery = response.data.voltage; this.azimut = response.data.azimut; this.elevation = response.data.elevation; }); }, 100);\n  },\n\n  methods: {}\n};","map":{"version":3,"mappings":"AA0DA;AACA;AACA;EACAA;EACAC;IACA;MACAC;MACAC;MACAC;MACAC;IACA;EACA;EACAC;IACA;IACA;MACA;MACAC;IACA;IACA;MACA;MACAA;MACA;MACAA;IACA;IACA;MACA;MACA;MAAA;MAAA;IACA;IACAC;MAAA;IAAA;IACA;EACA;;EAEAC,UAEA;AACA","names":["name","data","azimut","elevation","battery","ws","created","console","bus","methods"],"sourceRoot":"src/components","sources":["rotator.vue"],"sourcesContent":["<template>\n  <div class=\"container\">\n    <v-layout text-xs-center wrap>\n      <v-flex xs12 sm6 offset-sm3>\n        <v-card>\n          <v-card-title primary-title>\n            <div class=\"ma-auto\">\n              <h1><span class=\"black--text\">{{azimut}}&deg;</span></h1>\n              <span class=\"grey--text\">Азимут</span>\n              <br>\n              <h1><span class=\"black--text\">{{elevation}}&deg;</span></h1>\n              <span class=\"grey--text\">Элевация</span>\n              <br>\n              <h1><span class=\"black--text\">{{battery}} B</span></h1>\n              <span class=\"grey--text\">Напряжение на батарее</span>\n            </div>\n          </v-card-title>\n        </v-card>\n      </v-flex>\n    </v-layout>\n\n    <!--<div class=\"columns\">\n      <div class=\"column is-two-fifths\">\n        <div class=\"card\">\n          <div class=\"card-content\">\n\n            <div class=\"card-content has-text-centered\">\n              <h1 class=\"title is-1\"><span>{{ azimut }}</span><span>&deg;</span></h1>\n              <div class=\"content\">\n                <p>Азимут</p>\n              </div>\n            </div>\n            <p></p>\n            <div class=\"card-content has-text-centered\">\n              c<span>{{ elevation }}</span><span>&deg;</span></h1>\n              <div class=\"content\">\n                <p>Элевация</p>\n              </div>\n            </div>\n\n          </div>\n        </div>\n      </div>\n      <div class=\"column is-two-fifths\">\n        <div class=\"card\">\n          <div class=\"card-content has-text-centered\">\n            <h1 class=\"title is-3\"><span>{{ battery }}</span><span> V</span></h1>\n            <div class=\"content\">\n              <p>Напряжение на батарее</p>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>-->\n  </div>\n</template>\n\n<script>\n// import axios from 'axios';\nimport { bus } from '@/event-bus'\nexport default {\n  name: 'RotatorMain',\n  data () {\n    return {\n      azimut: 0,\n      elevation: 0,\n      battery: 0,\n      ws: null\n    }\n  },\n  created () {\n    this.ws = new WebSocket(`ws://${window.location.hostname}/ws`) // `ws://localhost:2000/`\n    this.ws.onopen = function () {\n      // eslint-disable-next-line\n      console.log('WS подключен')\n    }\n    this.ws.onclose = function (eventclose) {\n      // eslint-disable-next-line\n      console.log('Cоеденение закрыто: ')\n      // eslint-disable-next-line\n      console.log(eventclose)\n    }\n    this.ws.onmessage = function (msg) {\n      var response = JSON.parse(msg.data)\n      this.battery = response.voltage.toFixed(2); this.azimut = response.azimut.toFixed(2); this.elevation = response.elevation.toFixed(2)\n    }.bind(this)\n    bus.$on('send_ws', (mess) => { this.ws.send(mess) })\n    // setInterval(() => { axios.get(`api/get_data`).then((response) => { this.battery = response.data.voltage; this.azimut = response.data.azimut; this.elevation = response.data.elevation; }); }, 100);\n  },\n\n  methods: {\n\n  }\n}\n</script>\n"]},"metadata":{},"sourceType":"module"}